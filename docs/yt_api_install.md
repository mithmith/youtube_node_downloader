# Руководство по настройке и запуску проекта YouTube API

- [Руководство по настройке и запуску проекта YouTube API](#руководство-по-настройке-и-запуску-проекта-youtube-api)
  - [1. Установка зависимостей](#1-установка-зависимостей)
  - [2. Настройка API YouTube](#2-настройка-api-youtube)
  - [3. Настройка переменных окружения](#3-настройка-переменных-окружения)
  - [4. Авторизация через OAuth](#4-авторизация-через-oauth)
  - [5. Запуск проекта](#5-запуск-проекта)
  - [6. Возможные ошибки и их решение](#6-возможные-ошибки-и-их-решение)

## 1. Установка зависимостей

Убедитесь, что у вас установлен Python версии 3.10 или выше. Установите необходимые библиотеки, выполнив команду:

```bash
pip install google-api-python-client google-auth google-auth-oauthlib python-dotenv
```

---

## 2. Настройка API YouTube

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/).
2. Создайте новый проект:
   - Нажмите **"Создать проект"**.
   - Укажите название проекта и сохраните.
3. Включите YouTube Data API:
   - В меню выберите **"API и службы" → "Библиотека"**.
   - Найдите и включите **YouTube Data API v3**.
4. Создайте учетные данные для API:
   - В разделе **"API и службы" → "Учетные данные"** нажмите **"Создать учетные данные"** → **"Идентификатор клиента OAuth"**.
   - Выберите тип приложения: **"Приложение для рабочего стола"**.
   - Скачайте файл `client_secret.json` с учетными данными. 
5. Скопируйте файл `client_secret.json` в корень вашего проекта и переименуйте его в соответствии с переменной окружения `YOUTUBE_SECRET_JSON` (например, `client_secret_youtube.json`).

---

## 3. Настройка переменных окружения

1. Создайте файл `.env` в корне проекта (возьмите за основу `.env.example`):

```bash
touch .env
```

2. Добавьте в него переменные:

```dotenv
YOUTUBE_API_KEY="<ваш_ключ_YouTube_API>"
YOUTUBE_SECRET_JSON="client_secret_youtube.json"
```

- `YOUTUBE_API_KEY`: ключ API, полученный в Google Cloud Console (раздел **"Учетные данные"** → **"Создать учетные данные"** → **"Ключ API"**).
- `YOUTUBE_SECRET_JSON`: имя файла с учетными данными OAuth.

---

## 4. Авторизация через OAuth

1. При первом запуске программы потребуется авторизация через браузер:
   - Откройте приложение, и оно автоматически откроет ссылку в браузере.
   - Войдите в Google-аккаунт, который имеет доступ к данным YouTube.
   - Предоставьте разрешение приложению.
2. После успешной авторизации учетные данные будут сохранены в файле `google-oauth2.pickle` для повторного использования.
3. Перенесите файл `google-oauth2.pickle` на сервер.

---

## 5. Запуск проекта

1. Убедитесь, что файл `.env` настроен корректно.
2. Выполните запуск программы:

```bash
python3 -m app
```

3. Если программа сообщает о необходимости авторизации, следуйте инструкциям, появляющимся в консоли.

---

## 6. Возможные ошибки и их решение

**Ошибка 1**: `could not locate runnable browser`
- Проблема: На сервере или системе отсутствует графическая оболочка для запуска браузера.
- Решение:
  - Выполните авторизацию на локальной машине с графическим интерфейсом.
  - Перенесите файл `google-oauth2.pickle` на сервер.

**Ошибка 2**: `No such file or directory: 'client_secret_8971...json'`
- Проблема: Файл с учетными данными OAuth отсутствует или указано неправильное имя.
- Решение:
  - Убедитесь, что файл существует в корне проекта и имя совпадает с переменной `YOUTUBE_SECRET_JSON` в `.env`.

**Ошибка 3**: `YOUTUBE_API_KEY is invalid`
- Проблема: Неправильный ключ API.
- Решение:
  - Убедитесь, что вы скопировали правильный ключ из Google Cloud Console и включили YouTube Data API для проекта.

---

Теперь ваш проект настроен для работы с YouTube API.
